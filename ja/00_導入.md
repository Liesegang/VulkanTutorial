## はじめに

このチュートリアルでは、[Vulkan](https://www.khronos.org/vulkan/)グラフィックスと計算APIの基本的な使い方を学びます。
Vulkanは、OpenGLで知られている[Khronos group](https://www.khronos.org/)による新しいAPIで、最新のグラフィックスカードのより優れた抽象化を提供します。
この新しいインターフェースにより、アプリケーションが何をしようとしているのかをより良く記述することができ、[OpenGL](https://ja.wikipedia.org/wiki/OpenGL)や[Direct3D](https://ja.wikipedia.org/wiki/Direct3D)のような既存のAPIと比較して、パフォーマンスの向上やドライバの意図しない動作を減らすことができます。
Vulkanの背後にあるアイデアは[Direct3D 12](https://ja.wikipedia.org/wiki/Direct3D#%E5%A4%89%E9%81%B7)や[Metal](https://ja.wikipedia.org/wiki/Metal_(API))と似ていますが、Vulkanは完全にクロスプラットフォームであるという利点があり、Windows、Linux、Android用の開発を同時に行うことができます。

しかし、これらの利点に対する代償として、かなり冗長なAPIを使用しなければなりません。初期フレームバッファの作成や、バッファやテクスチャイメージのようなオブジェクトのメモリ管理など、グラフィックスAPIに関連するあらゆる詳細を、アプリケーション内にゼロから構築する必要があります。グラフィックスドライバはより少ない正確さに対する補助を行うため、正しい動作を保証するためにアプリケーションでより多くの作業をしなければなりません。

注意点は、Vulkanは万人向けではないということです。
高性能なコンピュータグラフィックスに熱中していて、ある程度の努力を惜しまないプログラマを対象としています。
コンピュータグラフィックスよりもゲーム開発に興味があるのであれば、OpenGLやDirect3Dの方がいいかもしれません。
もう一つの選択肢は、[Unreal Engine](https://en.wikipedia.org/wiki/Unreal_Engine#Unreal_Engine_4)や[Unity](https://ja.wikipedia.org/wiki/Unity_(%E3%82%B2%E3%83%BC%E3%83%A0%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%B3))のようなエンジンを使用することですが、これらのエンジンはVulkanを使用することができ、より高いレベルのAPIを提供してくれます。

さて、このチュートリアルを行うための前提条件を説明しましょう。

* Vulkanに対応したグラフィックカードとドライバ ([NVIDIA](https://developer.nvidia.com/vulkan-driver), [AMD](http://www.amd.com/en-us/innovations/software-technologies/technologies-gaming/vulkan), [Intel](https://software.intel.com/en-us/blogs/2016/03/14/new-intel-vulkan-beta-1540204404-graphics-driver-for-windows-78110-1540))
* C++の使用経験 ([RAII](https://ja.wikipedia.org/wiki/RAII)、[初期化子リスト](https://cpprefjp.github.io/lang/cpp11/initializer_lists.html)に精通していること)
* C++17の機能をきちんとサポートしているコンパイラ (Visual Studio 2017+, GCC 7+, Clang 5+)
* ある程度の3Dコンピュータグラフィックスの知識

このチュートリアルでは、OpenGLやDirect3Dの概念についての知識は前提としていませんが、3Dコンピュータグラフィックスの基本を知っておく必要があります。
例えば、透視投影の背後にある数学については説明しません。 コンピュータグラフィックスの概念については、[this online book](https://paroj.github.io/gltut/)を参照してください。
他のいくつかの素晴らしいコンピュータグラフィックスのリソースを以下に挙げる。

* [Ray tracing in one weekend](https://github.com/petershirley/raytracinginoneweekend)
* [Physically Based Rendering book](http://www.pbr-book.org/)
* Vulkan being used in a real engine in the open-source [Quake](https://github.com/Novum/vkQuake) and [DOOM 3](https://github.com/DustinHLand/vkDOOM3)

望むなら、C++の代わりにCを使うこともできますが、別の線形代数ライブラリを使わなければならず、コード構造化は自己責任になります。クラスやRAIIのようなC++の機能を使ってロジックやリソースの寿命を管理します。Rust開発者向けに、このチュートリアルの[代替バージョン](https://github.com/bwasty/vulkan-tutorial-rs)も用意されています。

他のプログラミング言語を使っている開発者のため、また基本APIの経験を積むため、このチュートリアルでは、オリジナルのC APIを使ってVulkanを操作することにします。しかし、C++を使用している場合は、汚い作業の一部を抽象化し、特定のクラスのエラーを防ぐのに役立つ新しい[Vulkan-Hpp](https://github.com/KhronosGroup/Vulkan-Hpp)バインディングを使用することをお勧めします。

## E-book

このチュートリアルを電子書籍で読みたい場合は、EPUBまたはPDF版をダウンロードすることができます。

* [EPUB](https://raw.githubusercontent.com/Overv/VulkanTutorial/master/ebook/Vulkan%20Tutorial%20ja.epub)
* [PDF](https://raw.githubusercontent.com/Overv/VulkanTutorial/master/ebook/Vulkan%20Tutorial%20ja.pdf)

## チュートリアルの構成

まず、Vulkanの仕組みの概要を説明し、最初のステップとして三角形を画面に表示する方法を説明します。全体像の中での基本的な役割を理解したあとには、これらのそれぞれの小さなステップが何をしているかないついてより理解が深まるでしょう。次に、Vulkan SDK、線形代数演算用の[GLMライブラリ](http://glm.g-truc.net/) 、ウィンドウ作成用の[GLFW](http://www.glfw.org/)を使って開発環境を構築します。このチュートリアルでは、WindowsではVisual Studio、Ubuntu LinuxではGCCで開発環境を構築する方法を説明します。

その後、最初の三角形をレンダリングするのに必要なVulkanプログラムの基本的なコンポーネントをすべて実装します。各章は、おおよそ次のような構成になっています。

* 新しい概念とその目的を説明
* 関連するすべてのAPI呼び出しを使用し、プログラムに実装
* ヘルパー関数へ抽象化

各章は前の章の続きとして書かれていますが、あるVulkanの機能を紹介する単体の記事として読むことも可能です。つまり、リファレンスとしても活用できるということです。また、Vulkanの関数や型はすべて仕様書へのリンクが貼られているので、クリックして詳細を見ることができます。Vulkanは非常に新しいAPIなので、仕様書自体に不足があるかもしれません。その場合は、[Khronosリポジトリ](https://github.com/KhronosGroup/Vulkan-Docs)にフィードバックを出すことをお勧めします。

前述したように、Vulkan APIは、グラフィックスハードウェアを最大限に制御するための多くのパラメータを持つ、かなり冗長なAPIを持っています。そのため、テクスチャを作成するような基本的な操作でさえ、毎回繰り返さなければならない多くのステップを必要とします。そこで、このチュートリアルでは、独自のヘルパー関数のコレクションを作成していきます。

また、各章の最後には、そこまでの完全なコードファイルへのリンクを掲載しています。コードをどこに書くべきか、その構造に疑問がある場合や、バグをを発見するために比較したい場合に参照することができます。すべてのコードファイルは、複数のベンダーのグラフィックスカードでテストされており、正確性が確認されています。また、各章の最後にはコメント欄があり、その章の話題に関連するどんな質問でも書くことができます。使っているプラットフォーム、ドライバのバージョン、ソースコード、予想される動作、実際の動作を明記することで、質問の回答がしやすくなります。

このチュートリアルはコミュニティの努力を目的としています。Vulkanはまだ非常に新しいAPIであり、ベストプラクティスはまだ確立されていません。チュートリアルやサイトに対するフィードバックがあれば、遠慮なく [GitHubリポジトリ](https://github.com/Overv/VulkanTutorial)にIssueやプルリクエストを提出してください。リポジトリを*Watch*することで、チュートリアルの更新が通知されます。

最初にVulkanによって三角形を画面上に描くという修行を経た後、リニア変換、テクスチャ、3Dモデルを含むようにプログラムを拡張していきます。

グラフィックAPIを使ったことがある人なら、最初のジオメトリが画面に表示されるまでに多くのステップがあることを知っているでしょう。Vulkanにはこのような初期ステップがたくさんありますが、個々のステップは理解しやすく、冗長さを感じないことがお分かりいただけると思います。また、一度、退屈な見た目の三角形が描けるようになれば、完全にテクスチャを施した3Dモデルを描くのにそれほさらなる作業は必要なく、また、そこから先の各ステップは、はるかにやりがいがあるものであるということを覚えておくことも重要です。

チュートリアルに行っている間に何か問題が発生した場合は、まずFAQをチェックして、解決策がすでに記載されていないか確認してください。それでも行き詰った場合は、最も近い関連する章のコメント欄で気軽に助けを求めてください。

ハイパフォーマンスグラフィックスAPIの"未来"に飛び込む準備はできましたか？ [さぁ、出発しましょう](!ja/概要)
